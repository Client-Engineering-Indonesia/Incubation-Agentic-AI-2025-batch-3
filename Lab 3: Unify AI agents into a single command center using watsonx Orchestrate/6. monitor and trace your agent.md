# How to connect langfuse to watsonx orchestrate SaaS

<img width="3444" height="1862" alt="image" src="https://github.com/user-attachments/assets/305362eb-4214-4bae-9f19-c2f4bf924e85" />

This is a guide to show you how to connect langfuse on SaaS to your watsonx orchestrate instance, also running on SaaS.

I was trying to do the same on my recent project, it was pretty straight forward to enable langfuse on the local instance from ADK but it took me a while to figure out how when it came to wxo SaaS. So I decided to consolidate my notes and hopefully it helps.

## Pre-requisties
1. ADK installed : doc [here](https://developer.watson-orchestrate.ibm.com/getting_started/installing)
2. Access to a wxo SaaS instance (e.g. TechZone instance hosted on IBM Cloud)

## Access to Langfuse SaaS
1. Sign up to Langfuse cloud for free from [here](https://cloud.langfuse.com/auth/sign-up) (Please note that currently only EU instance would work)

2. Once you have signed up, create `new organisation` and then `new project`.
<img width="1910" height="904" alt="image" src="https://github.com/user-attachments/assets/4b07dc3b-9e35-46f5-a8e3-98a432419ad4" />

3. Go to your project and navigate to `Settings` from the left side bar.

4. Create a new API Key from `API Keys` and save `public key` and `secret key` for later.
<img width="1914" height="968" alt="image" src="https://github.com/user-attachments/assets/d0606f8c-8446-4667-8465-65fe5ebeaf82" />


## Connect Langfuse SaaS to wxo SaaS
1. From the ADK, create an environment to your SaaS instance.
```
orchestrate env add -n <environment-name> -u https://my-service-instance-url
```

2. Activate the instance with your IAM API Key.
```
orchestrate env activate <environment-name>
```

3. Create the config file in YAML (let's call it langfuse.yaml for now). Use the secret key and public key you got from Langfuse earlier.
```
spec_version: v1
kind: langfuse
project_id: default
api_key: <secret-key>
url: https://cloud.langfuse.com/api/public/otel
host_health_uri: https://cloud.langfuse.com
config_json: 
  public_key: <public-key>
  mask_pii: true
```

4. Apply the config yaml with
```
orchestrate settings observability langfuse configure  --config-file <path-to-your-langfuse.yaml>
```

5. Done! Log back onto Langfuse and have fun with the dashboard.

## Contact
Feel free to slack me if you have any questions:
Lukas Ng (lukas.ng@ibm.com or slack @lukas.ng)
